function encodeURIforLinkto(a){return encodeURI(a.toString().toLowerCase().replace(/^\s+|\s+$/g,"").replace(/\s+/g,"-").replace(/\-\-+/g,"-"));}function CustomFileBrowser(d,b,c,e){var a="/admin/filebrowser/browse/?pop=2";
a=a+"&type="+c;tinyMCE.activeEditor.windowManager.open({file:a,width:980,height:500,resizable:"yes",scrollbars:"yes",inline:"no",close_previous:"no"},{window:e,input:d,editor_id:tinyMCE.selectedInstance.editorId});
return false;}tinyMCE.init({mode:"textareas",theme:"advanced",skin:"default",entity_encoding:"raw",verify_html:true,accessibility_warnings:false,browsers:"gecko,msie,safari,opera",editor_deselector:"mceNoEditor",keep_styles:false,language:"en",object_resizing:true,plugins:"advimage,advlink,paste,media,searchreplace,template,contextmenu,table,inlinepopups,youtubeIframe,visualchars",tools:"inserttable",dialog_type:"modal",file_browser_callback:"CustomFileBrowser",element_format:"html",fix_list_elements:true,forced_root_block:"p",style_formats:[{title:"Cinza",block:"p",classes:"muted"},{title:"Lead",block:"p",classes:"lead"},{title:"Legenda",inline:"small",classes:"muted"},{title:"Label Default",inline:"span",classes:"label"},{title:"Label Success",inline:"span",classes:"label label-success"},{title:"Label Warning",inline:"span",classes:"label label-warning"},{title:"Label Important",inline:"span",classes:"label label-important"},{title:"Label Info",inline:"span",classes:"label label-info"},{title:"Label Inverse",inline:"span",classes:"label label-inverse"}],verify_html:true,relative_urls:false,document_base_url:"/",remove_script_host:true,width:758,height:400,indentation:"10px",content_css:"/static/bootstrap/css/bootstrap.min.css,/static/tinymce_content.min.css",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_buttons1:"formatselect,styleselect,|,bold,italic,underline,|,bullist,numlist,blockquote,sub,sup,|,undo,redo,|,hr,justifyleft,justifycenter,justifyright,justifyfull,|,indent,outdent,|,link,unlink,|,image,charmap,visualchars",theme_advanced_buttons2:"search,|,cut,copy,paste,pasteword,|,media,youtubeIframe,|,table,tablecontrols,|,removeformat,cleanup,code",theme_advanced_buttons3:"linkto_bio,linkto_event,linkto_place,|,image_caption_left,image_caption_right,|,columns_4x4,columns_2x2x2x2,columns_2x6,columns_6x2",theme_advanced_path:false,theme_advanced_blockformats:"p,h2,h3,h4,pre,code",theme_advanced_resizing:true,theme_advanced_resize_horizontal:false,theme_advanced_resizing_use_cookie:true,theme_advanced_styles:"Image Left=img_left;Image Right=img_right;Image Block=img_block",advimage_update_dimensions_onchange:true,table_styles:"Table=table;Stripped=table table-striped;Bordered=table table-bordered;Condensed=table table-condensed",table_row_styles:"Success=success;Error=error;Warning=warning;Info=info",advlink_styles:"Internal Link=internal;External Link=external",media_strict:true,grappelli_adv_hidden:false,grappelli_show_documentstructure:"on",setup:function(a){a.addButton("linkto_bio",{title:"Link to Bio",image:"/static/img/tinymce_linkto_bio.png",onclick:function(){a.focus();
texto=a.selection.getContent();slug=texto.replace(/^\s+|\s+$/g,"");slug=slug.replace(/\s+/g,"-");slug.toLowerCase();a.selection.setContent('<a href="/bio/'+encodeURIforLinkto(slug)+'.html" class="linkto linkto_bio">'+texto+"</a>");
}});a.addButton("linkto_place",{title:"Link to Place",image:"/static/img/tinymce_linkto_place.png",onclick:function(){a.focus();texto=a.selection.getContent();
slug=texto.replace(/^\s+|\s+$/g,"");slug=slug.replace(/\s+/g,"-");slug.toLowerCase();a.selection.setContent('<a href="/lugares/'+encodeURIforLinkto(slug)+'.html" class="linkto linkto_place">'+texto+"</a>");
}});a.addButton("linkto_event",{title:"Link to Event",image:"/static/img/tinymce_linkto_event.png",onclick:function(){a.focus();texto=a.selection.getContent();
slug=texto.replace(/^\s+|\s+$/g,"");slug=slug.replace(/\s+/g,"-");slug.toLowerCase();a.selection.setContent('<a href="/eventos/'+encodeURIforLinkto(slug)+'.html" class="linkto linkto_event">'+texto+"</a>");
}});a.addButton("image_caption_left",{title:"Imagem com caption pra esquerda",image:"/static/img/tinymce_image_left.png",onclick:function(){a.focus();texto=a.selection.getContent();
a.selection.setContent('<div class="img_left span4 figure"><img src="/static/img/tinymce_image_left.png" alt=""><p class="figcaption">Caption '+texto+"</p></div>");
}});a.addButton("image_caption_right",{title:"Imagem com caption pra direita",image:"/static/img/tinymce_image_right.png",onclick:function(){a.focus();
texto=a.selection.getContent();a.selection.setContent('<div class="img_right span4 figure"><img src="/static/img/tinymce_image_right.png" alt=""><p class="figcaption">Caption '+texto+"</p></div>");
}});a.addButton("columns_4x4",{title:"Duas colunas (4+4)",image:"/static/img/tinymce_columns_4x4.png",onclick:function(){a.focus();a.selection.setContent('<div class="row"><div class="span4">1</div><div class="span4">2</div></div>');
}});a.addButton("columns_2x2x2x2",{title:"Quatro colunas (2+2+2+2)",image:"/static/img/tinymce_columns_2x2x2x2.png",onclick:function(){a.focus();a.selection.setContent('<div class="row"><div class="span2">1</div><div class="span2">2</div><div class="span2">3</div><div class="span2">4</div></div>');
}});a.addButton("columns_6x2",{title:"Duas colunas (6+2)",image:"/static/img/tinymce_columns_6x2.png",onclick:function(){a.focus();a.selection.setContent('<div class="row"><div class="span6">1</div><div class="span2">2</div></div>');
}});a.addButton("columns_2x6",{title:"Duas colunas (2+6)",image:"/static/img/tinymce_columns_2x6.png",onclick:function(){a.focus();a.selection.setContent('<div class="row"><div class="span2">1</div><div class="span6">2</div></div>');
}});}});